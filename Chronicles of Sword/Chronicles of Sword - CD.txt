custom-name: Chronicles of Sword - CD - DOSBox
files:
- cdrtools: https://github.com/legluondunet/mlls-tools/raw/master/cdrtools/cdrtools.zip
- script: https://github.com/legluondunet/mlls-tools/raw/master/scripts/copycd.sh
- conf: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Chronicles%20of%20Sword/cos_dosbox.conf
game:
  main_file: $GAMEDIR/cos_dosbox.conf
installer:
- insert-disc:
    description: Please insert disc 1
    requires: cots.exe
- extract:
    dst: $GAMEDIR
    src: cdrtools
- chmodx: script
- execute:
    args: VOLUME_ID 0
    file: script
- insert-disc:
    description: Please insert disc 2
    requires: disk2
- execute:
    args: '1996'
    file: script
- execute:
    command: cd $GAMEDIR; rm -f -r *.toc; mv VOLUME_ID.cue COS_CD1.cue; mv VOLUME_ID.bin
      COS_CD1.bin; mv "1996.cue" COS_CD2.cue; mv "1996.bin" COS_CD2.bin; sed -i 's/VOLUME_ID.bin/COS_CD1.bin/g'
      COS_CD1.cue; sed -i 's/1996.bin/COS_CD2.bin/g' COS_CD2.cue
- copy:
    dst: $GAMEDIR
    src: conf

